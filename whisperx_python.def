Bootstrap: docker
From: nvcr.io/nvidia/cuda:12.2.2-cudnn8-devel-ubuntu22.04

%labels
    Description "Container for WhisperX + Python3.10 generated on Jun 16, 2025"

%post
    # Update system packages and install essential tools
    apt-get update && \
    apt-get install -y \
        build-essential wget curl git vim \
        python3 python3-pip ffmpeg && \
    apt-get clean all

    # Create python/pip symlinks for convenience
    ln -sf /usr/bin/python3 /usr/bin/python
    ln -sf /usr/bin/pip3 /usr/bin/pip

    # Install WhisperX
    pip install whisperx

%runscript
    if [ $# -eq 0 ]; then
        # If no arguments are provided, launch the bash shell
        exec /bin/bash
    else
        # If any arguments are given, run them as a command
        exec "$@"
    fi
